# 股票预测系统使用说明

## 📋 系统概述

本系统是一个基于Python和Streamlit的股票预测分析工具，集成了akshare数据源和多种机器学习模型，为用户提供A股股票的筛选、分析和价格预测功能。

## 🚀 快速开始

### 环境要求
- Python 3.8+
- 支持的平台: Windows, macOS, Linux

### 安装步骤

1. **克隆或下载项目**
```bash
git clone <项目地址>
cd 股票
```

2. **创建虚拟环境（推荐）**
```bash
python -m venv venv
source venv/bin/activate  # Linux/macOS
# 或
venv\Scripts\activate  # Windows
```

3. **安装依赖**
```bash
pip install -r requirements.txt
```

4. **启动应用**
```bash
streamlit run streamlit_app.py
```

应用将在默认浏览器中打开，地址为：`http://localhost:8501`

## 🎯 功能使用指南

### 1. 股票选择模块
- **股票代码输入**: 在侧边栏输入A股股票代码（如：000001 对应平安银行）
- **股票名称输入**: 可选，用于显示更友好的名称
- **搜索功能**: 系统会自动验证股票代码的有效性

### 2. 数据获取设置
- **时间范围**: 选择开始日期和结束日期
  - 建议选择至少1年的数据以获得更好的预测效果
  - 最大时间范围取决于akshare数据源

### 3. 模型配置
- **模型选择**: 
  - Random Forest (随机森林) - 默认，适合大多数情况
  - Linear Regression (线性回归) - 简单快速
  - XGBoost - 性能优秀，适合复杂模式
- **预测天数**: 滑动选择预测未来多少天的价格（5-60天）

### 4. 数据分析功能

#### 📊 价格图表
- K线图显示开盘价、最高价、最低价、收盘价
- 成交量柱状图
- 交互式缩放和平移

#### 📈 技术指标
系统自动计算并包含以下技术指标：
- 移动平均线 (MA5, MA10, MA20)
- 相对强弱指数 (RSI)
- 布林带 (Bollinger Bands)
- MACD指标
- 价格变化率和成交量变化率

### 5. 模型训练和预测

#### 训练过程
1. 点击"获取数据并分析"后，系统会自动：
   - 下载历史数据
   - 创建技术指标特征
   - 训练选择的机器学习模型
   - 评估模型性能

#### 性能指标
- **MAE** (平均绝对误差): 预测误差的平均值
- **MSE** (均方误差): 预测误差平方的平均值
- **RMSE** (均方根误差): MSE的平方根
- **R²** (决定系数): 模型解释的方差比例，越接近1越好

#### 未来预测
- 点击"预测未来价格"生成未来价格预测
- 预测结果以表格和图表形式展示
- 包含历史价格趋势和未来预测的对比

## ⚙️ 高级配置

### 自定义特征工程
如需修改技术指标，可以编辑 `streamlit_app.py` 中的 `create_features()` 函数

### 模型参数调整
在 `train_model()` 函数中可以修改各模型的超参数

### 数据源配置
系统使用akshare作为数据源，如需更换数据源，修改 `fetch_stock_data()` 函数

## 🐛 常见问题

### Q: 获取数据失败怎么办？
A: 
- 检查网络连接
- 确认股票代码正确（A股代码为6位数字）
- 检查时间范围是否有效

### Q: 模型预测准确率低怎么办？
A:
- 尝试选择更长的时间范围
- 更换不同的机器学习模型
- 增加更多历史数据

### Q: 启动时出现依赖错误？
A:
- 确认已安装所有requirements.txt中的包
- 尝试更新pip: `pip install --upgrade pip`
- 检查Python版本是否为3.8+

### Q: 预测结果不稳定？
A:
- 股票市场本身具有不确定性
- 建议结合其他分析工具使用
- 不要完全依赖预测结果进行投资决策

## 📊 性能优化建议

1. **数据缓存**: 对于频繁查询的股票，可以考虑实现数据缓存
2. **模型持久化**: 训练好的模型可以保存到文件避免重复训练
3. **异步加载**: 对于耗时操作可以使用异步处理改善用户体验

## 🔧 开发扩展

### 添加新模型
1. 在 `train_model()` 函数中添加新的模型选项
2. 导入相应的机器学习库
3. 配置模型参数

### 新增技术指标
1. 在 `create_features()` 函数中添加指标计算逻辑
2. 更新特征列表

### 界面定制
- 修改Streamlit布局和样式
- 添加新的可视化图表
- 扩展侧边栏功能

## ⚠️ 风险提示

- 本系统提供的预测结果仅供参考，不构成投资建议
- 股票市场投资有风险，请谨慎决策
- 机器学习模型预测存在误差，实际结果可能有所不同

## 📞 技术支持

如遇到技术问题或需要功能改进，请联系开发团队。

---

**版本**: 1.0.0  
**最后更新**: 2025-11-15  
**依赖版本**: 详见 requirements.txt